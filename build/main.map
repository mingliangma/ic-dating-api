{"version":3,"sources":["webpack:///webpack/bootstrap d8f40445460406f7b17b","webpack:///external \"express\"","webpack:///external \"path\"","webpack:///./server/common/logger.js","webpack:///./server/api/services/account.service.js","webpack:///./server/index.js","webpack:///./server/common/env.js","webpack:///external \"dotenv\"","webpack:///./server/common/server.js","webpack:///external \"body-parser\"","webpack:///external \"http\"","webpack:///external \"os\"","webpack:///external \"cookie-parser\"","webpack:///./server/common/swagger/index.js","webpack:///external \"swagger-express-middleware\"","webpack:///external \"pino\"","webpack:///./server/routes.js","webpack:///./server/api/controllers/examples/router.js","webpack:///./server/api/controllers/examples/controller.js","webpack:///./server/api/controllers/account/router.js","webpack:///./server/api/controllers/account/controller.js"],"names":["l","name","process","env","APP_ID","level","LOG_LEVEL","AccountService","me","info","constructor","result","accountId","displayName","ethnicity","dateOfBirth","gender","distance","pictures","url","signs","signId","signName","signAvatarUrl","order","router","listen","PORT","config","path","bodyParser","http","os","app","ExpressServer","root","normalize","__dirname","set","use","json","urlencoded","extended","SESSION_SECRET","static","routes","port","welcome","p","hostname","createServer","join","err","mw","enable","metadata","files","caseSensitive","strict","useBasePath","apiPath","SWAGGER_API_SPEC","parseRequest","cookie","secret","limit","REQUEST_LIMIT","CORS","validateRequest","req","res","next","status","send","message","express","Router","get","all","Controller","console","log","then","r"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d8f40445460406f7b17b","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 1\n// module chunks = 0","import pino from 'pino';\n\nconst l = pino({\n  name: process.env.APP_ID,\n  level: process.env.LOG_LEVEL,\n});\n\nexport default l;\n\n\n\n// WEBPACK FOOTER //\n// ./server/common/logger.js","import l from '../../common/logger';\n\nclass AccountService {\n  me() {\n    l.info(`${this.constructor.name}.me()`);\n    const result = {\n      accountId: '1dfasdf1',\n      displayName: 'Ming',\n      ethnicity: 'Asian',\n      dateOfBirth: '1988-11-1',\n      gender: 'female',\n      distance: 5,\n      pictures: [\n        {\n          url: 'https://scontent-ort2-1.xx.fbcdn.net/v/t1.0-9/1601455_10201728349473724_757186058_n.jpg?oh=23097799eabbb1bd04cabd17a48f1023&oe=5A4B8178',\n        },\n      ],\n      signs: [\n        {\n          signId: 0,\n          signName: 'money',\n          signAvatarUrl: 'https://image.flaticon.com/icons/png/128/189/189093.png',\n          order: 0,\n        },\n      ],\n    };\n    return result;\n  }\n}\n\nexport default new AccountService();\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/services/account.service.js","import './common/env';\nimport Server from './common/server';\nimport routes from './routes';\n\nexport default new Server()\n  .router(routes)\n  .listen(process.env.PORT);\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","import dotenv from 'dotenv';\n\ndotenv.config();\n\n\n\n// WEBPACK FOOTER //\n// ./server/common/env.js","module.exports = require(\"dotenv\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dotenv\"\n// module id = 7\n// module chunks = 0","import Express from 'express';\nimport * as path from 'path';\nimport * as bodyParser from 'body-parser';\nimport * as http from 'http';\nimport * as os from 'os';\nimport cookieParser from 'cookie-parser';\nimport swaggerify from './swagger';\nimport l from './logger';\n\nconst app = new Express();\n\nexport default class ExpressServer {\n  constructor() {\n    const root = path.normalize(`${__dirname}/../..`);\n    app.set('appPath', `${root}client`);\n    app.use(bodyParser.json());\n    app.use(bodyParser.urlencoded({ extended: true }));\n    app.use(cookieParser(process.env.SESSION_SECRET));\n    app.use(Express.static(`${root}/public`));\n  }\n\n  router(routes) {\n    swaggerify(app, routes);\n    return this;\n  }\n\n  listen(port = process.env.PORT) {\n    const welcome = p => () => l.info(`up and running in ${process.env.NODE_ENV || 'development'} @: ${os.hostname()} on port: ${p}}`);\n    http.createServer(app).listen(port, welcome(port));\n    return app;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/common/server.js","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"os\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"os\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 12\n// module chunks = 0","import middleware from 'swagger-express-middleware';\nimport * as path from 'path';\n\nexport default function (app, routes) {\n  middleware(path.join(__dirname, 'Api.yaml'), app, (err, mw) => {\n    // Enable Express' case-sensitive and strict options\n    // (so \"/entities\", \"/Entities\", and \"/Entities/\" are all different)\n    app.enable('case sensitive routing');\n    app.enable('strict routing');\n\n    app.use(mw.metadata());\n    app.use(mw.files({\n      // Override the Express App's case-sensitive \n      // and strict-routing settings for the Files middleware.\n      caseSensitive: false,\n      strict: false,\n    }, {\n      useBasePath: true,\n      apiPath: process.env.SWAGGER_API_SPEC,\n      // Disable serving the \"Api.yaml\" file\n      // rawFilesPath: false\n    }));\n\n    app.use(mw.parseRequest({\n      // Configure the cookie parser to use secure cookies\n      cookie: {\n        secret: process.env.SESSION_SECRET,\n      },\n      // Don't allow JSON content over 100kb (default is 1mb)\n      json: {\n        limit: process.env.REQUEST_LIMIT,\n      },\n    }));\n\n    // These two middleware don't have any options (yet)\n    app.use(\n      mw.CORS(),\n      mw.validateRequest());\n\n    // Error handler to display the validation error as HTML\n    app.use((err, req, res, next) => { // eslint-disable-line no-unused-vars, no-shadow\n      res.status(err.status || 500);\n      res.send(\n        `<h1>${err.status || 500} Error</h1>` +\n        `<pre>${err.message}</pre>`);\n    });\n\n    routes(app);\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/common/swagger/index.js","module.exports = require(\"swagger-express-middleware\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"swagger-express-middleware\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"pino\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pino\"\n// module id = 15\n// module chunks = 0","import examplesRouter from './api/controllers/examples/router';\nimport accountRouter from './api/controllers/account/router';\n\nexport default function routes(app) {\n  app.use('/api/v1/examples', examplesRouter);\n  app.use('/api/v1/account', accountRouter);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/routes.js","import * as express from 'express';\nimport controller from './controller';\n\nexport default express\n  .Router()\n  .get('/me', controller.all);\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/controllers/examples/router.js","import AccountService from '../../services/account.service';\n\n\nexport class Controller {\n  all(req, res) {\n    console.log('adsf');\n    AccountService.all()\n      .then(r => res.json(r));\n  }\n}\nexport default new Controller();\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/controllers/examples/controller.js","import * as express from 'express';\nimport controller from './controller';\n\nexport default express\n  .Router()\n  .get('/me', controller.me);\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/controllers/account/router.js","import AccountService from '../../services/account.service';\n\n\nexport class Controller {\n  me(req, res) {\n    const result = AccountService.me();\n    res.json(result);\n  }\n}\nexport default new Controller();\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/controllers/account/controller.js"],"sourceRoot":""}